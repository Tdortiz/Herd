<div class="panel">
    <div class="panel-body">

        <form name="form" (ngSubmit)="f.form.valid && submitStatus(f)" #f="ngForm" enctype="multipart/form-data" novalidate>
            <!--  Title and Remaining Chars -->
            <!--<div class="row">
                <div class="col-sm-12">
                    <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !status.valid }">
                        <div class="c-body">{{ actionName }} | <small>{{ maxStatusLength - model.status.length }}</small></div>
                    </div>
                </div>
            </div>-->
            <!-- Spoiler Text / Text Area -->
            <div class="row">
                <div class="col-sm-12">
                    <div class="form-group">
                        <input *ngIf="model.contentWarning" class="form-control" name="spoilerText" [(ngModel)]="model.spoilerText" #spoilerText="ngModel" maxlength="{{ maxStatusLength }}" placeholder="Spoiler Text" required />
                        <textarea class="form-control" name="status" [(ngModel)]="model.status" #status="ngModel" required placeholder="What's happening?" maxlength="{{ maxStatusLength }}" rows="3"></textarea>
                        <div *ngIf="f.submitted && !status.valid" class="help-block">Status is required</div>
                    </div>
                </div>
            </div>
            <!-- Buttons -->
            <div class="row">
                <div class="col-sm-12">
                    <div class="form-horizontal">
                        <div class="pull-left">
                            <div class="form-inline">
                                <button type="button" class="c-btn c-btn-secondary spoilerButton" [ngClass]="{'c-bg-warning': model.contentWarning, 'spoilerButton': !model.contentWarning }" (click)="toggleContentWarning()">
                                    <fa name="exclamation-triangle" size="1"></fa>
                                </button>
                                <label class="c-btn c-btn-secondary">
                                    <fa name="cloud-upload" size="1"></fa>
                                    <input #fileInput style="display: none !important;" type="file" (change)="onFileChange($event)">
                                </label>
                                <select name="visibility" class="form-control" [(ngModel)]="model.visibility" selected=0 required>
                                    <option *ngFor="let visibility of visibilityOptions" [ngValue]="visibility.value" title="{{ visibility.context }}">
                                        {{ visibility.option }}
                                    </option>
                                </select>
                            </div>
                        </div>
                        <div class="pull-right c-btn-group">
                            <div class="charLimitOffset">
                                <p><small>{{ maxStatusLength - model.status.length }}</small></p>
                            </div>
                            <button [disabled]="loading || !f.valid" type="submit" class="c-btn c-btn-primary">
                                <fa *ngIf="loading" name="spinner" spin=true></fa>
                                <span><fa name="pencil"></fa> {{ actionName }}</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Images  -->
            <div class="row">
                <div class="col-sm-12">
                    <div *ngIf="model.file" class="image-row">
                        <div class="image-wrapper">
                            <img [src]="ImagePreview" class="image" />
                            <fa name="times" class="close" (click)="clearFile()"></fa>
                        </div>
                    </div>
                </div>
            </div>
        </form>

    </div><!-- /.panel-body -->
</div><!-- /.panel -->